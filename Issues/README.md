 [Morgan] All right, I hope you're ready to dive in and begin architecting solutions on AWS. Let's call our first customer and have a conversation about their workload. (telephone ringing) - [Raf] 
 
 - Hi there! I am a technical architect here at Any Company Ecommerce, happy to meet you.
 - [Morgan] Hello there! Nice to meet you too, because we've clearly never met before. My name is Morgan and I'm a Solutions Architect here at AWS, and I hear you're trying to move a specific workload to AWS, and are looking for some help on how to get there.
- [Raf] Yeah, yeah, that's true. We've been working on moving our systems to AWS over the last few years, and we already have a decent amount of things on AWS, but we have mostly just moved those workloads to AWS without much you know, refactoring. Now, we have an opportunity to completely rewrite our next workload as part of a migration we are doing here.
- [Morgan] Oh, that's awesome. I can definitely help you with that. So, it sounds like before, you were using a lift-and-shift model for migration, whereas now, you're looking to use more cloud-native technologies so that you can better take advantage of the cloud and its benefits. Can you tell me more about your business and the project that you want help with?
- [Raf] Yeah, absolutely. So, we sell cleaning products all over the world, and we have a website and an app open to the public, where customers shop and place orders. We also have a website for buyers to purchase our products wholesale, for resale in their own shops. All of the orders from across these various frontends come in to our orders service, hosted on premises, that validates, authenticates, accepts, orders, and processes, and stores the order in a database, and then also makes calls downstream to other services, like the inventory fulfillment and accounting service, to reflect the confirmed order. The inventory fulfillment and accounting services are already hosted in the AWS Cloud, and the orders service is the last major piece that needs to be moved over. - [Morgan] Okay, all right, I understand. So, what about payment processing? Is payment processing in scope for this project?
- [Raf] No, we use - we use a payment gateway service. So, by the time this request hits the backend, the payment will already be taken care of. We just need to accept the order into our backend services, perform some business logic, and then send it to the downstream services for further processing. - [Morgan] Okay great, thanks for that context. And how are you accepting a request for the services? Do you have a web server running somewhere, or are you hosting an API that's the entry point for this? What do you have going on? - [Raf] Yeah, that's a good question. Right now, we are using a web server that is also hosted on the same server with the application, to route requests to the backend service. - [Morgan] Okay, cool. So, what about storing orders that come in? What type of database are you using for those orders? - [Raf] Oh, the database, right. We are currently using MySQL database on-prem for this service to store the order data. The other downstream services will work with their own data store. So, we are open to changing databases, but it's very important that to be highly available and durable. We only store the orders in one table, so maintaining a whole MySQL instance for this has been a bit of a time-consuming task for the minimal data we store in the database. I think, ideally, we would have a database in AWS that is simpler to manage, and it's a little bit of more hands off, so we don't spend that much time maintaining it. - [Morgan] Yeah, that makes sense. It sounds like we can probably find a simpler solution for you. So, I'm hearing that you want to host a web backend on AWS, as well as a database for the order service. And I'm thinking we will try to go serverless for this as much as possible, given it sounds like you want to reduce any operational overhead. Can you tell me some more about the problems you're trying to solve with this migration? What types of pain points are driving your desire to completely rewrite the service, instead of just lifting and shifting it, like you did with the other services? - [Raf] Yeah, so most of the issues we run into for this app come from the application layer, because of the way all of this business logic is all tied together in one order service. When that service gets overloaded, it can slow down, or even crash. This means that orders are slow to get accepted, and sometimes fail when the application becomes overwhelmed. We have a hard time scaling on premises to meet our demands, and we are looking for a solution with automatic scaling that doesn't require time to set up or operate. There is also an issue, where if the application crashes, and a process is finishing up making the calls to downstream APIs, so let's say the first call to the inventory service encounters is successful, but then the application crashes, right? This means that the application doesn't get the chance to send the information for successfully process orders to the downstream services, like fulfillment and accounting. So in a nutshell, most of our problems come from not being able to scale quickly enough to meet demand, and then, secondarily, our components are too tightly coupled. So if one API call fails, then the next few ones don't get completed. This causes inconsistency with our orders data and causes headaches for our customers. - [Morgan] Yeah okay, I got it. I can definitely see how that would cause some frustration, and why you would want to fix that. So, I'm hearing that you want managed scaling in place, and that you want this application to be decoupled to increase resilience. I also have, as a requirement, that we need to come up with a solution for sending the downstream calls to those other services, independent of each other, so that they don't impact the orders processing. Now, what about demand for this application? Is it a steady demand with low volume, or high volume? Is it cyclical, or do you have a spiky demand? - [Raf] Yeah, our app has pretty spiky demand. When we launch online sales or send out coupon codes, we see, like, huge traffic. But then, at other times, we have essentially zero demand. And as you know, it can be hard to operate on demand like that because we have to overprovision hardware in the data centers, right? We have to buy more servers and put it there. - [Morgan] Cool, all right, so no problem. We can try to come up with a solution here that will scale up when you need it. And then more importantly, scale back down when demand goes down, which, like you're saying, is harder to do on premises, where you have to overprovision things all the time. - [Raf] So, we are ready to begin planning to move these orders service to AWS. And as part of this process, we are open to rewrite the codes to go cloud native, whenever possible. I think that going cloud native would let us take advantage of the benefits offered by the cloud. We are also hoping that, as part of this migration and refactoring, we will be able to fix some of the issues we have been encountering in the code. - [Morgan] Yep, I think I understand what you're looking for. Now beyond all that, do you have any other requirements for this that you have laid out already? - [Raf] Yes, I do. This is something we have been spending a lot of time talking about internally, here, in meetings. I think that, at this point, we have covered most things, but something specific, is that we want monitoring and logging to be easy to put in place. And ideally, we want everything to use the same logging system. - [Morgan] Okay great, so are there any other aspects of this that you're trying to optimize? - [Raf] Mm, yeah. One more thing I can think of right now, is that we want to try to optimize this solution for cost and performance as much as possible. - [Morgan] Wow, all right, so you are super prepared. - [Raf] Thank you. (laughing) - [Morgan] That's awesome. I have all of my notes up here and I'm going to take those and go digest this information. And I'll likely be calling you for more information as needed as I have questions as I'm designing this. I hope that's alright. - [Raf] Absolutely yeah, so thank you for helping us designing something that meets our needs. Looking forward to see what you come with. Call me anytime if you have any questions, okay? - [Morgan] All right, thanks. 
